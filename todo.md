### 测试用户
tsingxiii@gmail.com
Vip112233

导入功能：
允许用户从 Google Scholar、ORCID 导入关注作者
从已有论文库导入关键词

用户反馈模型，需要存储用户的交互与反馈过程

### 2025-11-29 22:17:32
TODO
- 测试好论文分析prompt，完善公共数据库的论文
- 完善私有数据库构建过程
    1. 检索对应类别的公共论文（先以cl类别为例）
    2. 对检索到的论文进行分析，明确需要更新的字段（id、category等）
    3. 更新私有数据库
- 确保前端正常显示查询到的论文
    1. 卡片显示（支持模糊效果，缩小显示大小），根据相关度排序，支持显示未被选中的论文（也按评分排序）
    2. 支持点击进入详情页，详情页支持左右滑动
    3. 支持like\dislike等，并更新到数据库中存储交互行为（更新dislike反馈面板）
- 支持通过自然语言更新需求（看调用什么LLM，也需要提前写prompt）
- 生成报告功能
    1. 编写prompt，在cherry studio测试一下，直接输入论文所有信息，看能否在长上下文下直接生成报告（好像有直接帮助生成报告的开源软件，deep Research相关的）
    2. 前端正常显示报告，能够索引到对应论文（这个前后端逻辑肯定需要更改）
    3. 能够直接在前端点击生成研报，如果当日有就不允许生成

- 优化前端显示效果
    1. 缩小的一定程度会丢失顶栏，elicit到一定程度自动转为移动端样式
    2. 优化交互反馈
    3. 昵称显示栏，自然语言显示栏优化

- 可能后面还需要更换前端语言，前端的反应速度太慢了，看看 node.js 有没有用，好不好实现（上线后的优化）

### 2025-12-5 14:52:35

是否要将每日更新的论文都放在独立的数据库中？然后如果当日有更新就将过去的论文丢到旧的数据库中？（暂时没必要，只能算优化）
或者爬虫将今日获取的论文id与对应类别存入缓存，然后筛选机制直接在这其中比对类别？然后将符合要求的论文id获取公共数据库中的详情信息，再分析后更新到私有数据库中？
再或者不要缓存，直接额外维护一个公共数据库，存放每日更新论文。每次获取新论文后，同时存入每日更新数据库和公共数据库，只是每日更新数据库是覆盖操作（先清空再写入），而公共数据库是存入操作

目前写的 类别筛选论文 功能还需要筛掉没有初始化的论文，后续需要每日爬取的论文直接分析过后再更新到数据库中，就不用再考虑 status 字段了


我需要额外维护一个公共数据库，存放每日更新论文。每次获取新论文后，同时存入每日更新数据库和公共数据库，只是每日更新数据库是覆盖操作（先清空再写入），而公共数据库是存入操作。这样一来，为每个用户检索当日更新论文时，就可以直接从每日更新数据库中检索，在总论文库数量很多时，能减少很多计算量。详细来说，后续需要先写测试，测试arxiv是否有所更新（比对new网站的html，看是否有更新），只有更新了，才调用爬虫程序爬取更新后的论文。具体来说，测试是否更新（若更新） → 清空每日论文数据库 → 爬取新论文 → 存入每日论文数据库 → 获取详情信息 → 调用LLM分析 → 存入公共数据库。

你需要：
1. 额外创建一个数据库，用于存放每日更新论文
2. 实现测试是否更新功能：初始化一个str，每次获取论文时要储存 “Showing new listings for” 后的时间。在调用时在https://arxiv.org/list/cs.CL/new 页面中，比对 html 元素中 “Showing new listings for” 后的时间，看是否更新（比如今天的是 Showing new listings for Friday, 5 December 2025）。如果确认arxiv有更新，就需要调用爬虫和后续的更新操作
3. 爬虫爬取论文后，写入每日更新数据库，将后续关于公共数据库的更新操作都关联到每日更新数据库
4. 在使用LLM提取完所有论文信息后，存入到公共数据库中

我需要你确认现在的代码逻辑，是否满足以上需求
收到后，先向我确认是否有其他需要我确认的问题与可以优化项目的选项，并给出你的推荐。我给出反馈后你再生成中文版plan
你认为功能还可以怎样进行丰富？
这个指令是否有问题/冲突


### 指令
- 我需要代码的逻辑是：根据类别获取论文时，是从papers共有论文库中找寻status为completed或analyzed字段且category标签和用户关注的category有交集的论文，把这些id打包输出。并且还要比对user_paper_states对应user_id下存在的论文，确保不输出重复的论文。你需要确认是否满足这个功能。我猜测可能在获取论文后，程序又进行了去重操作。实际上应该是把找到的论文去重了（我目前设置的默认获取论文数为1，方便测试，你不要改动）


### 2025-12-05 22:41:28
实现前端显示 → 报告生成 → 邮件发送 → 前端显示


### 2025-12-06 21:09:28
更换 api
生成多类别论文
生成报告 -- 将前固定数量的论文输入给模型，每句话都需要有引用，需要固定一个报告板式
实现邮件发送功能 -- html 格式

### 2025-12-07 20:53:19
报告生成流程
1. 借助 AI 生成符合预期的内容
2. 实现前端的解析
3. 后端实现能够稳定生成对应内容的 prompt

### 2025-12-08 09:49:22
为每个用户初始化通用的报告？还是初始化页面？就是在获取不到用户数据的时候显示初始化报告
简化用户注册流程